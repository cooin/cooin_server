const _ = require('lodash');

/**
 * 测试使用
 * @param server
 * @param options
 * @param next
 */
exports.register = (server, options, next) => {

  // const DB = server.plugins['hapi-sequelize'][process.env.DB_DBNAME];
  //
  // const Realtimeprice_log = DB.getModel('realtimeprice_log');
  //
  // Realtimeprice_log.findAll({
  //   raw: true,
  //   attributes: ['id', 'lastprice'],
  //   where: {currencytype: 1},
  //   order: [
  //     ['id', 'DESC']
  //   ],
  //   limit: 10000
  // }).then(data => {
  //   array = data;
  //   internal.do().then(data => {
  //     console.log(data.sort().join(','));
  //     console.log('*********************');
  //     console.log(Math.min.apply(null, data));
  //     console.log(Math.max.apply(null, data));
  //     console.log(eval(data.join('+')) / data.length);
  //   })
  // });
  //
  // let array = [];
  //
  // let results = [];
  //
  // const cache = {
  //   lastprice: null
  // };
  //
  // const internal = {};
  //
  // internal.handle = (data) => {
  //   const amount = cache.lastprice ? Number(Math.abs(cache.lastprice - data.lastprice).toFixed(2)) : 0;
  //   cache.lastprice = data.lastprice;
  //   return Promise.resolve(amount);
  //
  // }
  //
  // internal.do = () => {
  //   const item = array.pop();
  //   if (!item) return Promise.resolve(results);
  //   return internal.handle(item).then(data => {
  //     if (data) results.push(data);
  //     return internal.do();
  //   });
  // }

  next();
};

exports.register.attributes = {
  name: 'trans test',
  version: '1.0.0'
};


// const util_number = require('../lib/number');
//
// let array = '0.58,0.01,0.01,0.12,0.01,0.01,0.14,0.05,0.01,0.02,0.01,0.01,0.01,0.01,0.28,0.02,0.02,0.26,0.26,0.26,0.01,0.01,0.01,0.24,0.01,0.02,0.01,0.01,0.09,0.01,0.01,0.12,0.02,0.16,0.01,0.02,0.01,0.07,0.01,0.2,0.01,0.01,0.19,0.18,0.01,0.01,0.01,0.01,1.52,1.5,0.02,0.02,0.01,0.02,0.13,0.1,0.11,0.01,0.01,0.01,0.1,0.01,0.02,0.01,0.01,0.01,0.02,0.01,0.02,0.02,0.01,0.03,0.09,0.14,0.01,0.01,0.01,0.1,0.01,1.43,1.43,0.08,0.02,0.01,0.01,0.1,0.01,0.09,0.01,0.09,0.01,0.01,0.09,0.01,0.08,0.01,0.02,0.01,0.1,0.01,0.01,0.09,0.01,0.14,0.02,0.05,0.06,0.06,0.08,0.08,0.02,0.07,0.01,0.01,0.01,0.01,0.1,0.01,0.1,0.01,0.03,0.03,0.08,0.09,0.01,0.05,0.01,0.01,0.01,0.15,0.18,0.01,0.01,0.18,0.01,0.02,0.01,0.17,0.01,0.01,0.08,0.05,0.02,0.05,0.01,0.08,0.01,0.01,0.01,0.09,0.06,0.01,0.12,0.02,0.09,0.01,0.01,0.01,0.01,0.01,0.01,0.07,0.01,0.01,0.02,0.01,0.02,0.01,0.02,0.03,0.03,0.01,0.01,0.01,0.03,0.02,0.01,0.1,0.01,0.05,0.04,0.01,0.01,0.01,0.01,0.01,0.01,0.05,0.02,0.02,0.01,0.03,0.01,0.11,0.06,0.08,0.01,0.02,0.01,0.05,0.02,0.01,0.01,0.01,0.01,0.1,0.05,0.04,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.04,0.01,0.01,0.01,0.02,0.01,0.02,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.03,0.01,0.01,0.01,0.01,0.02,0.01,0.01,0.01,0.15,0.01,0.01,0.01,0.01,0.01,0.01,0.13,0.14,0.01,0.01,0.02,0.05,0.01,0.01,0.01,0.01,0.05,0.01,0.01,0.01,0.01,0.19,0.02,0.01,0.01,0.01,0.01,0.19,0.01,0.05,0.01,0.01,0.11,0.02,0.05,0.01,0.04,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.11,0.15,0.02,0.01,0.15,0.15,0.01,0.15,0.15,0.01,0.02,0.01,0.01,0.02,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.15,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.07,0.01,0.01,0.07,0.05,0.07,0.02,0.01,0.11,0.09,0.01,0.01,0.08,0.01,0.08,0.01,0.01,0.01,0.1,0.01,0.1,0.01,0.01,0.01,0.01,0.02,0.19,0.01,0.01,0.01,0.02,0.02,0.01,0.01,0.01,0.11,0.01,0.22,0.01,1.87,2.2,0.01,0.01,0.02,0.01,0.33,0.01,0.02,0.01,0.32,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.2,0.19,0.19,0.02,0.01,0.01,0.01,0.01,0.01,0.11,0.01,0.02,0.09,0.01,0.1,0.01,0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.01,0.02,0.01,0.02,0.02,0.01,0.01,0.2,0.01,0.01,0.01,0.2,0.22,0.01,0.01,0.07,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.02,0.01,0.01,0.01,0.01,0.02,0.01,0.01,0.01,0.01,2.11,2.11,0.01,0.01,0.01,0.01,0.1,0.01,0.02,0.01,0.02,0.01,0.01,0.01,0.11,0.01,0.08,0.01,0.01,0.01,0.01,0.01,0.19,0.01,0.01,0.02,0.01,0.02,0.01,0.43,0.01,0.37,0.01,0.37,0.01,0.32,0.01,0.01,0.29,0.01,0.04,0.02,0.29,0.01,0.01,0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.25,0.2,0.22,0.01,0.01,0.21,0.01,0.02,0.01,0.01,0.02,0.01,0.02,0.16,0.01,0.16,0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.01,0.02,0.07,0.01,0.02,0.01,0.01,0.01,0.02,0.01,0.01,0.1,0.01,0.01,0.01,0.02,0.01,0.01,0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.03,0.01,0.14,0.01,0.01,0.14,0.01,0.04,0.01,0.01,0.05,0.01,0.01,0.05,0.04,0.04,0.01,0.01,0.01,0.04,0.04,0.04,0.01,0.05,0.01,0.1,0.14,0.1,0.1,0.01,0.01,0.01,0.01,0.01,0.08,0.01,0.02,0.02,0.02,0.01,0.1,0.1,0.01,0.01,0.01,0.03,0.03,0.01,0.11,0.13,0.21,0.03,0.26,0.19,0.17,0.02,0.16,0.01,0.16,0.01,0.03,0.02,0.02,0.02,0.01,0.18,0.18,0.01,0.19,0.01,0.01,0.01,0.01,0.01,0.14,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.05,0.01,0.01,0.4,0.01,0.35,0.1,0.33,0.33,0.01,0.01,0.15,0.01,0.02,0.01,0.1,0.1,0.1,0.01,0.1,0.17,0.01,0.17,0.01,0.01,0.01,0.01,0.01,0.1,0.12,0.01,0.01,0.01,0.02,0.07,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.18,0.01,0.1,0.01,0.01,0.02,0.01,0.02,0.02,0.02,0.02,0.05,0.01,0.01,0.01,0.01,0.01,0.05,0.01,0.01,0.01,0.01,0.05,0.15,0.02,0.03,0.07,0.12,0.02,0.02,0.02,0.01,0.02,0.01,0.17,0.22,0.29,0.01,0.01,0.1,0.1,0.01,0.01,0.2,0.01,0.2,0.06,0.01,0.08,0.08,0.06,0.02,0.01,0.02,0.1,0.1,0.11,0.02,0.09,0.01,0.01,0.01,0.01,0.01,0.11,0.01,0.09,0.01,0.1,0.01,0.2,0.01,0.2,0.1,0.04,0.01,0.01,0.01,0.13,0.01,0.05,0.13,0.13,0.02,0.01,0.05,0.08,0.12,0.19,0.01,0.01,0.18,0.18,0.01,0.01,0.18,0.01,0.2,0.02,0.02,0.01,0.01,0.07,0.01,0.01,0.1,0.09,0.01,0.01,0.1,0.07,0.06,0.17,0.12,0.01,0.01,0.01,0.05,0.02,0.04,0.04,0.02,0.02,0.06,0.06,0.2,0.2,0.1,0.01,0.1,0.02,0.08,0.01,0.1,0.01,0.04,0.03,0.08,0.1,0.01,0.09,0.01,0.02,0.01,0.03,0.05,0.1,0.01,0.02,0.02,0.02,0.15,0.01,0.25,0.25,0.01,0.02,0.01,0.01,0.01,0.01,0.05,0.01,0.01,0.01,0.02,0.02,0.05,0.01,0.35,0.35,0.01,0.25,0.2,0.04,0.01,0.01,0.01,0.01,0.23,0.01,0.01,0.01,0.02,0.01,0.01,0.01,0.02,0.02,0.02,0.01,0.05,0.05,0.01,0.01,0.01,0.02,0.11,0.1,0.08,0.12,0.01,0.02,0.01,0.01,0.28,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.21,0.2,0.21,0.01,0.01,1.97,1.98,0.12,0.01,0.01,0.01,0.1,0.1,0.01,0.02,0.1,0.1,0.1,0.02,0.01,0.01,0.1,0.3,0.01,0.3,0.01,0.01,0.31,0.01,0.01,0.01,0.01,0.02,0.1,0.01,0.01,0.09,0.01,0.01,0.01,0.1,0.1,0.1,0.1,0.1,0.02,0.02,0.07,0.07,0.07,0.02,0.11,0.09,0.02,0.01,0.02,0.02,0.02,0.02,0.02,0.01,0.01,0.01,0.05,0.09,0.01,0.09,0.02,0.09,0.14,0.14,0.01,0.14,0.14,0.01,0.14,0.02,0.18,0.01,0.01,0.01,0.02,0.01,0.01,0.18,0.02,0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.02,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.22,0.01,1.6,1.83,0.01,0.3,0.02,0.02,0.29,0.2,0.01,0.1,0.09,0.01,0.01,0.09,0.09,0.09,0.1,0.01,0.01,0.21,0.23,0.02,0.19,0.01,0.01,0.18,0.17,0.03,0.01,0.02,0.01,0.01,0.14,0.01,0.17,0.03,0.01,0.01,0.04,9.31,0.02,0.01,0.01,0.01,0.09,0.01,0.01,0.02,0.01,0.1,0.01,0.01,0.01,0.01,0.09,0.01,0.19,0.09,0.01,0.01,0.08,0.08,0.01,0.08,0.01,0.19,0.02,0.01,0.02,0.19,0.01,0.01,0.07,0.01,0.07,0.01,0.05,0.05,0.05,0.01,0.01,0.01,0.02,0.05,0.1,0.01,0.04,0.01,0.02,0.01,0.04,0.01,0.04,0.01,0.03,0.01,0.01,0.01,0.01,0.01,0.05,0.03,0.01,0.09,0.1,0.01,0.11,0.01,0.03,0.01,0.01,0.01,0.02,0.01,0.01,0.14,0.15,0.06,0.19,0.01,0.01,0.01,0.1,0.01,0.05,0.05,0.1,0.01,0.01,0.01,0.01,0.01,0.09,0.01,0.09,0.01,0.09,0.09,0.1,0.01,0.02,0.01,0.01,0.01,0.1,0.01,0.6,0.2,0.01,0.01,0.2,0.1,0.01,0.1,0.1,0.1,0.3,0.2,0.01,0.01,0.02,0.1,0.39,0.01,0.41,0.01,0.7,0.7,0.69,0.01,0.09,0.01,0.09,0.05,0.1,0.01,0.03,0.01,0.01,0.54,0.01,0.5,0.11,0.01,0.11,0.01,0.39,0.86,0.05,0.01,0.01,0.01,0.6,0.01,0.01,0.05,0.12,0.17,0.59,0.02,0.01,0.02,0.14,0.45,0.5,0.01,0.01,0.01,0.01,0.02,0.01,0.01,0.05,0.01,0.01,0.02,0.1,0.11,0.09,0.09,0.01,0.15,0.26,0.01,0.24,0.09,0.15,0.22,0.2,0.01,0.01,0.01,0.24,0.23,0.23,0.01,0.02,0.01,0.22,0.01,0.13,0.08,0.21,0.02,0.05,0.02,0.29,0.29,0.01,0.24,0.22,0.01,0.02,0.21,0.01,0.01,0.01,0.01,0.12,0.1,0.2,0.1,0.1,0.09,0.01,0.08,0.09,0.02,0.21,0.2,0.01,0.2,0.02,0.01,0.02,0.01,0.01,0.18,0.1,0.08,0.02,0.08,0.01,0.17,0.17,0.02,0.17,0.01,0.01,0.01,0.38,0.38,0.4,0.01,0.08,0.09,0.01,0.01,0.02,0.01,0.02,0.07,0.07,0.01,0.01,0.29,0.01,0.22,0.09,0.01,0.1,0.3,0.01,0.02,0.1,0.02,0.05,0.02,0.02,0.01,0.07,0.01,0.01,0.01,0.01,0.05,0.01,0.01,0.02,0.02,0.01,0.03,0.05,0.2,0.24,0.01,0.24,0.01,0.04,0.01,0.05,0.03,0.03,0.05,0.04,0.01,0.01,0.1,0.1,0.1,0.11,0.1,0.08,0.08,0.16,0.08,0.1,0.18,0.18,0.01,0.19,0.02,0.32,0.04,0.32,0.48,0.01,0.2,0.1,0.1,0.2,0.1,0.11,0.06,0.2,0.35,0.01,0.17,0.22,0.02,0.37,0.45,0.07,0.07,0.07,0.07,0.01,0.2,0.2,0.35,0.34,0.01,0.07,0.07,0.01,0.3,0.29,0.29,0.3,0.48,0.47,0.49,0.49,0.39,0.3,0.3,0.2,0.3,0.3,0.09,0.01,0.39,0.01,0.2,0.1,0.1,0.1,0.1,0.1,0.1,0.01,0.1,0.5,0.69,0.19,0.6,0.01,0.49,0.49,0.5,0.08,0.08,0.08,0.08,0.28,0.1,0.1,0.5,1.48,1.49,0.1,0.01,0.4,0.29,0.02,0.51,0.01,0.45,0.55,0.1,0.03,0.63,0.91,0.01,0.01,0.11,0.1,0.01,0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.12,0.37,0.36,0.01,0.01,0.36,0.01,0.01,0.03,0.1,0.1,0.01,0.01,0.01,0.06,0.01,0.02,0.02,0.06,0.26,0.16,0.01,0.01,0.3,0.3,0.01,0.01,0.01,0.01,0.03,0.01,0.02,0.12,0.1,0.11,0.12,0.08,0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.14,0.09,0.01,0.01,0.18,0.01,0.01,0.14,0.01,0.2,0.05,0.01,0.25,0.25,0.04,0.29,0.38,0.39,0.4,0.02,0.01,0.5,0.01,0.18,0.18,0.09,0.01,0.01,0.01,0.02,0.01,0.19,0.09,0.1,0.2,0.01,0.01,0.01,0.2,0.2,0.22,0.17,0.17,0.08,0.01,0.3,0.21,0.21,0.1,0.1,0.1,0.01,0.06,0.16,0.17,0.01,0.03,0.21,0.01,0.02,0.16,0.05,0.1,0.31,0.01,0.01,0.2,0.2,0.01,0.1,0.01,0.09,0.01,0.1,0.05,0.25,0.3,0.68,0.98,0.01,0.25,0.01,0.01,0.54,0.01,0.44,0.44,0.02,0.02,0.05,0.29,0.1,0.08,0.09,0.01,0.01,0.07,0.07,0.01,0.01,0.01,0.01,0.15,0.01,0.01,0.15,0.15,0.1,0.01,0.01,0.21,0.2,0.2,0.2,0.02,0.01,0.2,0.1,0.19,0.01,0.19,0.01,0.01,0.01,0.29,0.01,0.05,0.01,0.13,0.02,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.01,0.2,0.01,0.02,0.38,0.08,0.04,0.06,0.05,0.36,0.01,0.11,0.01,0.09,0.01,0.01,0.12,0.1,0.1,0.01,2.77,0.08,0.01,0.01,0.01,0.02,0.02,0.03,0.02,0.02,0.1,0.01,0.1,0.01,0.1,0.01,0.1,0.1,0.1,0.17,0.01,0.01,0.01,0.01,0.01,0.02,0.01,0.02,0.2,0.02,0.03,0.05,0.2,0.2,0.01,0.05,0.05,0.01,0.05,0.06,0.8,0.01,0.1,0.01,0.1,0.2,0.02,0.22,0.01,0.02,0.1,0.1,0.1,0.1,0.2,0.2,0.5,0.01,0.01,0.02,0.39,0.4,0.01,0.28,0.28,0.01,0.01,0.01,0.35,0.05,0.32,0.26,0.24,0.26,0.24,0.02,0.23,0.01,0.09,0.05,0.13,0.13,0.1,0.1,0.02,0.01,0.01,0.01,0.01,0.14,0.03,0.01,0.05,0.04,0.01,0.03,0.05,0.05,0.08,0.23,0.01,0.13,0.11,0.01,0.01,0.03,0.14,0.11,0.12,0.12,0.02,0.17,0.2,0.04,0.03,0.01,0.03,0.01,0.01,0.02,0.04,0.01,0.01,0.01,0.01,0.01,0.04,0.04,0.04,0.04,0.01,0.01,0.09,0.09,0.09,0.01,0.06,0.05,0.33,0.01,0.02,0.01,0.23,0.02,0.01,0.01,0.01,0.1,0.12,0.01,0.02,0.11,0.09,0.21,0.05,0.05,0.05,0.06,0.11,0.17,0.1,0.15,0.02,0.03,0.2,0.19,0.01,0.3,0.1,0.1,0.1,0.1,0.3,0.01,0.18,0.19,0.28,0.26,0.58,0.6,0.6,0.01,0.5,0.3,0.2,0.48,0.05,0.23,0.01,0.01,0.01,0.19,0.2,0.2,0.18,0.01,0.04,0.02,0.02,0.12,0.02,0.19,0.2,0.1,0.08,0.02,0.02,0.46,0.46,0.01,0.29,0.1,0.1,0.1,0.01,0.1,0.2,0.2,0.27,0.26,0.07,0.07,0.01,0.01,0.01,0.01,0.03,0.15,0.15,0.14,0.14,0.01,0.01,0.12,0.11,0.14,0.14,0.14,0.14,0.01,0.01,0.1,0.01,0.01,0.11,0.15,0.14,0.02,0.01,0.28,0.26,0.01,0.28,0.28,0.29,0.29,0.01,0.01,0.27,0.28,0.01,0.17,0.03,0.01,0.02,0.02,0.02,0.06,0.05,0.01,0.01,0.02,0.1,0.1,0.1,0.1,0.01,0.01,0.1,0.06,0.07,0.07,0.01,0.02,0.19,0.02,0.01,0.02,0.02,0.01,0.23,0.01,0.15,0.4,0.05,0.2,0.01,0.1,0.01,0.2,0.01,0.12,0.12,0.02,0.12,0.04,0.2,0.19,0.01,0.01,0.01,0.25,0.01,0.05,0.08,0.17,0.01,0.15,0.15,0.2,0.19,0.19,0.19,0.06,0.22,0.02,0.07,0.14,0.04,0.01,0.01,0.02,0.01,0.06,0.08,0.09,0.1,0.01,0.01,0.01,0.01,0.01,0.04,0.09,0.14,0.02,0.15,0.01,0.2,0.01,0.09,0.01,0.09,0.03,0.03,0.04,0.16,0.16,0.25,0.1,0.11,0.14,0.02,0.07,0.1,0.09,0.09,0.01,0.01,0.09,0.01,0.01,0.01,0.05,0.01,0.05,0.06,0.01,0.01,0.05,0.09,0.01,0.15,0.15,0.01,0.1,0.1,0.15,0.15,0.01,0.19,0.1,0.09,0.01,0.04,0.03,0.21,0.01,0.1,0.2,0.2,0.3,0.2,0.2,0.01,0.1,0.01,0.01,0.1,0.02,0.08,0.01,0.01,0.02,0.01,0.18,0.18,0.18,0.02,0.18,0.08,0.09,0.09,0.1,0.1,0.1,0.01,0.19,0.01,0.21,0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.14,0.14,0.01,0.01,0.11,0.02,0.12,0.01,0.02,0.02,0.02,0.2,0.01,0.01,0.01,0.09,0.1,0.01,0.1,0.1,0.11,0.1,0.01,0.1,0.1,0.08,0.03,0.02,0.07,0.01,0.01,0.01,0.01,0.01,0.01,0.08,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.13,0.04,0.01,0.02,0.04,0.06,0.06,0.15,0.01,0.02,0.01,0.02,0.01,0.01,0.08,0.18,0.3,0.01,0.1,0.1,0.02,0.01,0.01,0.02,0.21,0.01,0.18,0.35,0.07,0.02,0.01,0.19,0.01,0.01,0.01,0.02,0.01,0.01,0.01,0.2,0.01,0.19,0.01,0.01,0.01,0.19,0.01,0.07,0.22,0.01,0.01,0.09,0.02,0.09,0.01,0.01,0.01,0.09,0.01,0.01,0.01,0.11,0.01,0.01,0.05,0.03,0.02,0.2,0.15,0.05,0.1,0.1,0.01,0.01,0.01,0.01,0.05,0.05,0.01,0.04,0.16,0.01,0.15,0.04,0.01,0.19,0.15,0.14,0.16,0.16,0.14,0.01,0.14,0.01,0.09,0.09,0.02,0.01,0.02,0.01,0.01,0.01,0.09,0.01,0.09,0.01,0.01,0.13,0.01,0.12,0.25,0.02,0.23,0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.06,0.01,0.05,0.01,0.01,0.01,0.02,0.04,0.03,0.01,0.01,0.01,0.01,0.04,0.01,0.02,0.01,0.01,0.01,0.07,0.02,0.07,0.01,0.06,0.01,0.03,0.49,0.2,0.2,0.2,0.01,0.1,0.1,0.01,0.1,0.1,0.13,0.01,0.05,0.08,0.1,0.1,0.1,0.95,0.01,0.01,0.65,0.16,0.17,0.17,0.28,0.13,0.18,0.05,0.15,0.03,0.01,0.18,0.01,0.2,0.28,0.08,0.13,0.01,0.45,0.4'.split(',');
//
// let results = [];
//
// const cache = {
//   lastprice: null
// };
//
// const internal = {};
//
// internal.handle = (lastprice) => {
//   const amount = cache.lastprice ? Number(Math.abs(cache.lastprice - lastprice).toFixed(2)) : 0;
//   cache.lastprice = lastprice;
//   // return Promise.resolve(amount);
//   return Promise.resolve(amount * util_number.random(30, [60, 60, 70, 80, 100][util_number.random(0, 4, 0)], 3));
//
// }
//
// internal.do = () => {
//   const item = array.pop();
//   if (!item) return Promise.resolve(results);
//   return internal.handle(item).then(data => {
//     if (data) results.push(data);
//     return internal.do();
//   });
// }
//
// internal.do().then(data => {
//   console.log(data.sort().join(','));
//   console.log('*********************');
//   console.log(Math.min.apply(null, data));
//   console.log(Math.max.apply(null, data));
//   console.log(eval(data.join('+')) / data.length);
// })


// const util_number = require('../lib/number');
//
// let array = '0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.14,0.15,0.18,0.26,0.3,0.33,0.33,0.33,0.33,0.34,0.34,0.35,0.36,0.36,0.38,0.38,0.38,0.38,0.38,0.44,0.46,0.48,0.48,0.48,0.49,0.49,0.49,0.5,0.5,0.5,0.5,0.5,0.5,0.52,0.52,0.54,0.54,0.59,0.62,0.64,0.65,0.66,0.71,0.72,0.75,0.81,0.82,0.86,0.88,0.88,0.9,0.9,0.94,0.97,0.99,0.99,0.99,0.99,0.99,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.01,1.01,1.01,1.01,1.01,1.01,1.01,1.01,1.01,1.03,1.04,1.05,1.07,1.09,1.11,1.11,1.12,1.15,1.15,1.15,1.16,1.19,1.26,1.3,1.38,1.4,1.44,1.49,1.49,1.51,1.58,1.63,1.75,1.76,1.76,1.79,1.87,1.87,1.88,1.98,1.98,1.99,1.99,1.99,10,10,10,10,10,10.01,10.1,10.23,10.27,10.38,10.69,10.72,10.94,10.94,101,11,11,11,11,11,11.15,11.21,11.27,11.42,11.67,11.77,110.97,118.89,12,12.15,12.24,12.37,12.37,12.38,12.61,12.63,13,13,13.06,13.36,13.49,13.9,14,14,14.28,14.38,14.46,14.91,14.95,14.98,14.99,147.89,147.89,15,15,15,15,15,15,15,15,15,15.04,15.51,15.63,15.94,15.99,16.02,16.05,16.28,17,17,17.96,18,18,18,18,18,18,18,18,18.12,18.88,18.9,18.99,18.99,18.99,18.99,18.99,19,19,19,19,19.67,19.76,19.82,19.98,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2.07,2.09,2.1,2.1,2.1,2.1,2.1,2.1,2.18,2.18,2.21,2.3,2.3,2.33,2.33,2.34,2.36,2.38,2.4,2.46,2.5,2.5,2.5,2.52,2.6,2.64,2.7,2.72,2.74,2.8,2.86,2.87,2.88,2.89,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.96,2.99,2.99,20,20,20,20,20,20,20,20,20.01,20.02,21,21,21,21.22,21.5,21.69,21.76,21.92,22,22.98,23,23,23,23,23,23.02,23.22,23.3,23.46,23.54,23.73,23.81,23.94,24,24.31,24.65,24.98,25,25,25,25,25,25,25,25,25.06,25.37,25.51,25.52,25.53,25.54,25.54,25.99,25.99,25.99,25.99,26,26.01,26.32,26.41,26.41,26.44,26.44,26.44,26.44,26.54,26.54,26.62,26.75,26.9,26.9,26.92,26.97,26.97,26.99,27.09,27.18,27.5,27.56,27.62,27.71,27.88,27.9,27.9,27.99,28,28,28.06,28.35,28.37,28.37,28.65,29,29.09,29.09,29.37,29.9,29.9,3,3,3,3,3,3,3,3,3,3.08,3.1,3.14,3.22,3.35,3.43,3.44,3.61,3.71,3.78,3.8,3.81,3.84,3.86,3.88,3.95,3.95,3.98,3.99,30,30,30.41,30.43,30.62,30.68,30.68,30.99,31,31.52,31.77,32.01,32.12,32.43,32.62,32.79,33.19,33.31,33.44,33.64,33.9,33.92,33.97,33.97,33.97,33.97,33.98,34.45,34.9,34.9,34.99,35,35,35,35,35.66,35.84,36,36.01,36.01,36.17,36.17,37.57,37.98,38,38.45,38.67,38.67,38.85,38.86,39,39,39.27,39.27,39.3,39.83,39.98,4,4,4,4,4,4,4,4,4,4,4,4.01,4.04,4.06,4.07,4.12,4.15,4.19,4.28,4.36,4.5,4.53,4.59,4.63,4.8,4.91,4.95,4.98,4.98,4.99,4.99,40,40,40,40,40.75,40.92,40.92,41.37,41.47,41.58,42.73,43.27,46,47.67,47.73,48.01,48.71,5,5,5,5,5,5,5,5,5,5,5,5,5.02,5.02,5.02,5.04,5.1,5.13,5.18,5.19,5.36,5.37,5.41,5.45,5.55,5.57,5.61,5.61,5.64,5.87,5.87,5.88,5.9,5.91,5.99,50.88,51.83,54.14,54.96,55,57.14,6.04,6.09,6.2,6.2,6.36,6.49,6.5,6.72,6.89,6.9,6.95,66.21,66.71,67.9,67.9,7,7.04,7.29,7.36,7.59,7.79,7.8,7.95,7.99,70.2,75,76.25,77.03,77.21,79.09,8,8,8.01,8.06,8.24,8.62,8.73,8.82,8.95,8.99,80.96,82.73,9,9,9,9.01,9.09,9.09,9.09,9.1,9.33,9.4,9.88,9.89,9.98,9.99'.split(',');
//
// let results = [];
//
// const cache = {
//   lastprice: null
// };
//
// const internal = {};
//
// internal.handle = (lastprice) => {
//   const amount = cache.lastprice ? Number(Math.abs(cache.lastprice - lastprice).toFixed(2)) : 0;
//   cache.lastprice = lastprice;
//   // return Promise.resolve(amount);
//   return Promise.resolve(amount * util_number.random(0.01, [0.01, 0.02, 0.02, 0.03, 0.3][util_number.random(0, 4, 0)], 4));
//
// }
//
// internal.do = () => {
//   const item = array.pop();
//   if (!item) return Promise.resolve(results);
//   return internal.handle(item).then(data => {
//     if (data) results.push(data);
//     return internal.do();
//   });
// }
//
// internal.do().then(data => {
//   console.log(data.sort().join(','));
//   console.log('*********************');
//   console.log(Math.min.apply(null, data));
//   console.log(Math.max.apply(null, data));
//   console.log(eval(data.join('+')) / data.length);
// })
