const sharp = require("sharp");
const fs = require('fs');
const util_encrypt = require('./encrypt');


/**
 * 保存图片
 * @param dataURL
 */
exports.save = dataURL => {
  //图片格式
  let format;
  //转换成buffer
  const buffer = Buffer.from(dataURL.split(",")[1], 'base64');
  //获取图片信息
  return sharp(buffer).metadata().then(metadata => {
    format = metadata.format;
    return this.write(buffer, format)
  });
}

/**
 * 保存图片（附带一张缩率图）
 * @param dataURL
 */
exports.saveWithMini = dataURL => {
  //图片格式
  let format;
  //转换成buffer
  const buffer = Buffer.from(dataURL.split(",")[1], 'base64');
  //获取图片信息
  return sharp(buffer).metadata().then(metadata => {
    format = metadata.format;
    let width = 200;
    let height = null;
    if(metadata.width < metadata.height) {
      const temp = width;
      width = height;
      height = temp;
    }
    return Promise.all([
      Promise.resolve(buffer),
      sharp(buffer).resize(width, height).toBuffer(),
    ]);
  }).then(datas => {
    return Promise.all([
      this.write(datas[0], format),
      this.write(datas[1], format)
    ]);
  })
}

/**
 * 写入文件
 * @param buffer
 * @param type
 */
exports.write = (buffer, type) => {
  const fileName = `${process.env.DIR_STATIC_IMAGES}${util_encrypt.AHMD5(buffer)}.${type}`;
  return new Promise((resolve, reject) => {
    //以二进制格式保存
    fs.writeFile(fileName, buffer, function (err) {
      if (err) return reject(err);
      resolve(`${process.env.PROTOCOL}://${process.env.DOMAIN}/${fileName}`);
    });
  });
}

//
// const dataURL = 'data:image/png;base64,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'
// this.saveWithMini(dataURL).then(data => console.log(data)).catch(err => console.log(err));
// this.save(dataURL).then(data => console.log(data)).catch(err => console.log(err));
